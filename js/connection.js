!function(t){function s(t,s,e,n,i){var o=this;this.id=t,this.snap=s,this.start={},this.end={},this.elem=this.snap.path("M0 0L0 0").attr({fill:"none",stroke:"#333",strokeWidth:4}),this.coll=this.snap.path("M0 0L0 0").attr({visibility:"hidden","pointer-events":"stroke",strokeWidth:20}),this.coll.addClass("node"),e.getGroup().append(this.elem),e.getGroup().append(this.coll),this.setStartPos(n.x,n.y),this.setEndPos(i.x,i.y),this.base_start={},this.base_end={},this.listeners={onclick:null,onmove:null},this.coll.drag(function(t,s){o.setStartPos(o.base_start.x+t,o.base_start.y+s),o.setEndPos(o.base_end.x+t,o.base_end.y+s),o.listeners.onmove&&o.listeners.onmove()},function(){o.base_start.x=o.start.x,o.base_start.y=o.start.y,o.base_end.x=o.end.x,o.base_end.y=o.end.y},function(){e.fireOnConUpdate(o)}),this.coll.click(function(){o.listeners.onclick&&o.listeners.onclick()})}s.prototype.onclick=function(t){this.listeners.onclick=t},s.prototype.onmove=function(t){this.listeners.onmove=t},s.prototype.off=function(t){this.listeners[t]=null},s.prototype.setStartPos=function(t,s){this.start.x=t,this.start.y=s,this.refresh()},s.prototype.setEndPos=function(t,s){this.end.x=t,this.end.y=s,this.refresh()},s.prototype.getStartPos=function(){return this.start},s.prototype.getEndPos=function(){return this.end},s.prototype.refresh=function(){this.elem.attr({d:"M"+this.start.x+" "+this.start.y+"L"+this.end.x+" "+this.end.y}),this.coll.attr({d:"M"+this.start.x+" "+this.start.y+"L"+this.end.x+" "+this.end.y})},t.Connection=s}(window);